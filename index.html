<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My custom Bulma website</title>
    <link rel="stylesheet" href="css/mystyles.css" />
    <link rel="manifest" href="./manifest.json" />
  </head>
  <body>
    <h1 class="title">Bulma</h1>

    <p class="subtitle">
      Modern CSS framework based on
      <a
        href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox"
        >Flexbox</a
      >
    </p>

    <div class="field">
      <div class="control">
        <input class="input" type="text" placeholder="Input" />
      </div>
    </div>

    <div class="field">
      <p class="control">
        <span class="select">
          <select>
            <option>Select dropdown</option>
          </select>
        </span>
      </p>
    </div>

    <div class="buttons">
      <a class="button is-primary">Primary</a>
      <a class="button is-link">Link</a>
    </div>

    <script>
      (() => {
        // This is the service worker with the Cache-first network

        // Add this below connect to your HTML page, or add the js file to your page at the very top to register service worker

        // Check compatibility for the browser we're running this in
        if ("serviceWorker" in navigator) {
          if (navigator.serviceWorker.controller) {
            console.log(
              "[PWA Builder] active service worker found, no need to register"
            );
          } else {
            // Register the service worker
            navigator.serviceWorker
              .register("serviceWorker.js", {
                scope: "./",
              })
              .then(function (reg) {
                console.log(
                  "[PWA Builder] Service worker has been registered for scope: " +
                    reg.scope
                );
              });
          }
        }
      })();

      let deferredPrompt = null;

      window.addEventListener("beforeinstallprompt", (e) => {
        $("#install-button").show();
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
      });

      async function install() {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          console.log(deferredPrompt);
          deferredPrompt.userChoice.then(function (choiceResult) {
            if (choiceResult.outcome === "accepted") {
              console.log("Your PWA has been installed");
            } else {
              console.log("User chose to not install your PWA");
            }
            deferredPrompt = null;
          });
        }
      }
    </script>
  </body>
</html>
